<div class="task-wrapper">
  <div class="task-card">
    <h1>My Task Tracker</h1>
    <p class="subtitle">Real-time persistence powered by Ammar Hassan</p>
    <!-- <p class="user-id">User ID: 07219523263021192371</p> -->

    <div class="input-section">
      <input type="text" placeholder="What needs to be done?" [(ngModel)]="newTask" (keyup.enter)="addTask()" />
      <button (click)="addTask()">Add Task</button>
    </div>

    <div *ngIf="tasks.length === 0" class="empty-state">
      You're all caught up! Add a new task above.
    </div>

    <ul>
      <li *ngFor="let task of tasks; let i = index" [class.completed]="task.completed">
        <ng-container *ngIf="editIndex === i; else viewMode">
          <input type="text" [(ngModel)]="editedTask" (keyup.enter)="saveEdit()" placeholder="Edit task name" />
          <div class="action-buttons">
            <button class="save" (click)="saveEdit()">💾</button>
            <button class="cancel" (click)="cancelEdit()">❌</button>
          </div>
        </ng-container>

        <ng-template #viewMode>
          <span (click)="toggleTask(i)">{{ task.name }}</span>
          <div class="action-buttons">
            <button class="edit" (click)="startEdit(i, task.name)">
              <img src="icons/edit.png" width="15" height="15" />
            </button>
            <button class="delete" (click)="deleteTask(i)">
              <img src="icons/delete.png" width="17" height="17" />
            </button>
          </div>
        </ng-template>
      </li>
    </ul>


  </div>
</div>